template(name='rentals')
    .ui.header Rentals
    unless is_author
        +view_rental
    //- .ui.green.button.rent Rent
    .ui.celled.grid
        .four.column.row
            each upcoming_days
                .column
                    +upcoming_day data=this
                    
template(name='upcoming_day')
    .ui.small.grey.header #{print_this.data.long_form}
    if reservation_slot_exists
        //- .ui.header res slot exists
        +reservation_slot_template
    else
        if is_product_author
            .ui.button.new_slot
                |New Slot
        
template(name='reservation_slot_template')
    if is_grandparent_author
        with slot
            .ui.header $#{price}
            unless reservation
                +boolean_edit key='prepaid' direct=true
                +number_edit key='price' direct=true
                +remove_button
            //- +rental
    unless is_grandparent_author
        .ui.divider
        .ui.header #{price}
        //- +boolean_edit key='rented' direct=true
        if reservation
            with reservation
                +reservation_template
        else
            .ui.green.button.rent_item Rent Item
            
template(name='reservation_template')        
    .ui.segment
        .ui.header Reservation
        +author_info
        .ui.small.header #{_author_username}
        if is_author
            +text_edit key='notes' direct=true
            +remove_button
    
            
template(name='view_rental')            
    .ui.segment
        .ui.header from {{long_date start_datetime}} to {{long_date end_datetime}}
        +boolean_view key='confirmed' label='confirmed' direct=true
        .ui.header #{rental_hours} hours at $#{../hourly_rate}/hour totaling $#{hourly_rental_price}
        if rental_days
            .ui.header #{rental_days} days at $#{daily_rental_price}/day

            
template(name='rental')
    .ui.segment
        //- if is_admin
        //-     +boolean_edit key='completed' label='completed' direct=true
            
        unless confirmed
            +date_edit key='reservation_day' direct=true
            //- +datetime_edit key='start_time'
            //- +datetime_edit key='end_time'
            //- +range_edit
            //- .ui.button.calculate_diff diff
            .ui.icon.button.delete_rental
                i.remove.icon
                
        +author_info
        //- .ui.header from {{long_date start_datetime}} to {{long_date end_datetime}}
        +boolean_edit key='confirmed' label='confirmed' direct=true
        .ui.header {{long_date reservation_day}}
        +date_view key='reservation_day' direct=true    
        //- .ui.header #{rental_hours} hours at $#{../hourly_rate}/hour totaling $#{hourly_rental_price}
        //- if rental_days
            .ui.header #{rental_days} days at $#{daily_rental_price}/day
        //- .ui.header #{rental_days} days at $#{daily_rental_price}/day
