template(name='kiosk_rental_view')
    with current_doc
        .ui.padded.grid
            .eight.wide.column
                if is_frontdesk
                    a.ui.fluid.big.button(href="/healthclub")
                        i.left.chevron.large.icon
                        |back
                else 
                    a.ui.fluid.big.button(href="/m/rental")
                        i.left.chevron.large.icon
                        //- i.store.large.icon
                        +ismall name='rental'
                        |rentals 
                h1.ui.center.aligned.header #{title}
                +image_view key='image' direct=true
                //- i.tags.icon
                +ismall name='tags'
                each tags
                    .ui.basic.label #{this}
                //- if is_admin
                //-     a.ui.large.fluid.button(href="/rental/#{_id}/view/info") 
                //-         i.external.icon
                //-         |full view
                if is_admin
                    a.ui.large.button(href="/rental/#{_id}/edit")
                        //- i.blue.pencil.icon
                        +i name='pencil'
                        |edit rental
                    +array_edit key='tags' label='tags' icon='tags' direct=true
                    +array_edit key='location_tags' label='location tags' icon='marker' direct=true
                    +single_user_edit key='resident' label='resident' direct=true
                    +text_edit key='contact_info' label='contact info' icon='info' direct=true
                    +link_edit key='amazon_referral_link' label='amazon referral link' icon='amazon' direct=true

            .eight.wide.column
                .ui.inline.large.header $#{hourly_rate}
                .ui.inline.header /hour
                .ui.dividing.header or
                .ui.inline.large.header #{hourly_karma}k
                .ui.inline.header /hour
                div
                .ui.inline.large.header $#{daily_rate}
                .ui.inline.header /day
                div
                .ui.inline.header #{views}
                .ui.small.inline.header views
                div
                if available 
                    i.green.large.checkmark.icon
                    |available
                else 
                    .ui.header 
                        +i name='cancel-2--v2'
                        //- i.large.ban.icon
                        |available in 2 hours
                div 
                |!{description}
                +rental_reservations
                +rental_transactions
                div
                +number_view key='retail_value' label='original retail value' tooltip='general info, helpful to renters to decide, also for price recommendations, and sorting' direct=true
                .ui.header
                    +i name='money' 
                    |payment options
                if cash_accepted
                    .ui.basic.label
                        i.green.money.icon 
                        |cash accepted
                if prepay
                    .ui.basic.label prepayment required
                if security_deposit_required
                    .ui.basic.label $#{security_deposit_amount} security depoist required
                if is_admin
                    +number_edit key='hourly_rate' label='hourly rate' direct=true
                    +number_edit key='daily_rate' label='daily rate' direct=true
                    //- div
                    //- +boolean_edit key='variable_price' label='variable price' direct=true tooltip='allow system to increase/decrease price based on performance and popularity'
                    //- div
                    //- +boolean_edit key='negotiable_price' label='negotiable price' tooltip='allow people to make bids' direct=true
                    div
                    +number_edit key='retail_value' label='original retail value' tooltip='general info, helpful to renters to decide, also for price recommendations, and sorting' direct=true
                    .ui.header 
                        |pricing
                    +boolean_edit key='cash_accepted' label='cash accepted' direct=true
                    div
                    +boolean_edit key='prepay' label='prepayment required' direct=true
                    div
                    +boolean_edit key='security_deposit_required' label='security deposit required' direct=true
                    if security_deposit_required
                        +number_edit key='security_deposit_amount' label='security deposit amount' icon='dollar' direct=true
                    div
                    +boolean_edit key='friend_discount' label='friend discount' direct=true
                    if friend_discount
                        +number_edit key='friend_discount_amount' label='security deposit amount' icon='dollar' direct=true

                if friend_discount
                    .ui.basic.label #{friend_discount_amount} friend discount
                if is_admin
                    +text_edit key='location' direct=true
                else 
                    .ui.header 
                        +i name='marker'
                        //- i.marker.icon(title='location')
                        small location
                        |#{location}
                +array_view key='availability_tags' label='availability tags' icon='clock' direct=true
                if is_admin
                    +multi_doc_view key='available_days' label='available days' ref_model='day_of_week' direct=true
                else 
                    +multi_doc_view key='available_days' label='available days' ref_model='day_of_week' direct=true
                .ui.header
                    +i name='delivery-handcart'
                    |delivery
                if pickup_delivery
                    .ui.basic.large.label 
                        +i name='delivery'
                        |pickup
                if is_admin
                    +boolean_edit key='delivery' label='delivery' direct=true
                    if delivery_cost
                        +number_edit key='delivery_cost' label='delivery_cost' icon='dollar' direct=true
                else 
                    if delivery
                        .ui.basic.large.label
                            +i name='delivery'
                            |delivery 
                        if delivery_cost
                            .ui.big.basic.label $#{delivery_cost} delivery cost 
                    if healthclub_drop_off_delivery
                        .ui.big.basic.label 
                            i.warehouse.icon
                            |healthclub dropoff/pickup
                    
                +comments
                .ui.big.fluid.green.button.new_reservation
                    .ui.inverted.inline.header
                        |reserve
                        i.right.chevron.icon
                +kiosk_send_message                    


template(name='rental_view_layout')
    +nav
    //- a.ui.large.button(href="/m/rental")
    //-     | Shop
    with current_doc
        .ui.stackable.padded.grid
            //- img.ui.large.rounded.image(src="{{c.url image width=500 height=500 gravity='face' crop='fill'}}")
            .row
                .four.wide.column
                    img.ui.centered.rounded.image(src="{{c.url image width=400 height=400 crop='fit'}}")
                
                    .ui.large.header #{title}
                    if can_edit
                        a.ui.fluid.button(href="/rental/#{_id}/edit")
                            i.pencil.icon
                            |edit
                    .ui.large.vertical.fluid.menu
                        a.item(href="/rental/#{_id}/info" class="{{isActiveRoute 'rental_info'}}")
                            |info
                        if rentable
                            a.item(href="/rental/#{_id}/rentals" class="{{isActiveRoute 'rental_rentals'}}")
                                |rentals
                        a.item(href="/rental/#{_id}/chat" class="{{isActiveRoute 'rental_chat'}}")
                            |chat
                        a.item(href="/rental/#{_id}/tasks" class="{{isActiveRoute 'rental_tasks'}}")
                            |tasks
                        a.item(href="/rental/#{_id}/earnings" class="{{isActiveRoute 'rental_earnings'}}")
                            |earnings
                        a.item(href="/rental/#{_id}/stats" class="{{isActiveRoute 'rental_stats'}}")
                            |stats
                        a.item(href="/rental/#{_id}/ownership" class="{{isActiveRoute 'product_ownership'}}")
                            |ownership
                        a.item(href="/rental/#{_id}/projections" class="{{isActiveRoute 'rental_projections'}}")
                            |projections
                        a.item(href="/rental/#{_id}/ads" class="{{isActiveRoute 'rental_ads'}}")
                            |ads
                    .ui.header added by #{_author_username}
                    |#{when}
                    with _author_id
                        +user_card
                    +array_view key='tags' icon='tags' direct=true
                    +array_view key='location_tags' label='location tags' icon='marker' direct=true
                    //- +text_view key='location' icon='marker' label='location description' direct=true

                    +number_view key='inventory' label='inventory' icon='move-by-trolley' direct=true
                    //- +dollar_price_view key='dollar_price' icon='money' label='dollar price' direct=true
                    if date_available
                        +date_view key='date_available' label='date available' icon='calendar' direct=true
                    if time_available
                        +time_view key='time_available' label='time available' icon='clock' direct=true
                    +product_adspace
                    .ui.header 
                        |reviews
                .eight.wide.column
                    +yield
                .four.wide.column
                    .ui.header $#{past_earnings} past earnings 
                    .ui.header $#{future_earnings} future earnings 
                    .ui.header #{future_reservations} future reservations
                    .ui.header #{past_reservations} past reservations
                    div
                    +product_location
                    .ui.header available_inventory #{inventory_available}
                    if for_sale
                        unless sold_out
                            .ui.big.green.fluid.button.add_to_cart 
                                |+ cart
                        else 
                            .ui.big.disabled.button
                                |sold out
                    +voting_full     
                    .ui.basic.segment
                        .ui.small.header
                            |delivery instructions
                        |#{delivery_instructions}      
                    .ui.header
                        |delivery
                    +boolean_view key='pickup_delivery' label='pickup' direct=true
                    +boolean_view key='home_dropoff_delivery' label='home dropoff' direct=true
                    +boolean_view key='building_dropoff_delivery' label='building dropoff' direct=true
                    +boolean_view key='healthclub_drop_off_delivery' label='health club drop off' direct=true
                    .ui.header pricing
                    +boolean_view key='cash_accepted' label='cash accepted' direct=true
                    +boolean_view key='prepay' label='prepayment required' direct=true
                    +boolean_view key='security_deposit_required' label='security deposit required' direct=true
                    if security_deposit_required
                        +number_view key='security_deposit_amount' label='security deposit amount' icon='dollar'
                    .ui.header pricing planning determination
                    +boolean_view key='friend_discount' label='friend discount' direct=true
                    if friend_discount
                        +number_view key='security_deposit_amount' label='security deposit amount' icon='dollar'
                    .ui.header
                        | privacy
                    .ui.small.header visibility
                    +boolean_view key='visible_to_friends' label='friends' direct=true
                    +boolean_view key='visible_to_building' label='building' direct=true
                    +boolean_view key='visible_to_residents' label='residents' direct=true
                    +boolean_view key='visible_to_public' label='public' direct=true
                    .ui.divider
                    +boolean_view key='published' label='published' direct=true
    +footer


template(name='rental_view_info')  
    with current_doc 
        h1.ui.header 
            i.info.icon
            |info
        +text_view key='title' direct=true
        .ui.two.column.grid
            .column
                +image_view key='image' label='image' direct=true
            .column
                +html_view key='description' label='content' icon='content' direct=true
        +array_view key='tags' label='tags' icon='tags' direct=true
        +array_view key='location_tags' label='location tags' icon='marker' direct=true
        +single_user_view key='resident' label='resident' direct=true
        +text_view key='contact_info' label='contact info' icon='info' direct=true
        +link_view key='amazon_referral_link' label='amazon referral link' icon='amazon' direct=true


            
                  
template(name='rental_view_audience')
    h1.ui.header 
        i.users.icon
        |audience
    .ui.header visibility
    +boolean_view key='visible_to_friends' label='friends' direct=true
    +boolean_view key='visible_to_building' label='building' direct=true
    +boolean_view key='visible_to_residents' label='residents' direct=true
    +boolean_view key='visible_to_public' label='public' direct=true

    
template(name='rental_view_ownership')
    h1.ui.header 
        i.pie.chart.icon
        |ownership
    .ui.header visibility
    +boolean_view key='visible_to_friends' label='friends' direct=true
    +boolean_view key='visible_to_building' label='building' direct=true
    +boolean_view key='visible_to_residents' label='residents' direct=true
    +boolean_view key='visible_to_public' label='public' direct=true

    
    
template(name='rental_view_tasks')
    h1.ui.header 
        i.tasks.icon
        |rental tasks
    .ui.header visibility
    +boolean_view key='visible_to_friends' label='friends' direct=true
    +boolean_view key='visible_to_building' label='building' direct=true
    +boolean_view key='visible_to_residents' label='residents' direct=true
    +boolean_view key='visible_to_public' label='public' direct=true

template(name='rental_view_ads')
    h1.ui.header 
        i.bullhorn.icon
        |ads
    .ui.header visibility
    +boolean_view key='visible_to_friends' label='friends' direct=true
    +boolean_view key='visible_to_building' label='building' direct=true
    +boolean_view key='visible_to_residents' label='residents' direct=true
    +boolean_view key='visible_to_public' label='public' direct=true

    
template(name='rental_view_chat')
    h1.ui.header 
        i.chat.icon
        |chat
    .ui.header visibility
    +boolean_view key='visible_to_friends' label='friends' direct=true
    +boolean_view key='visible_to_building' label='building' direct=true
    +boolean_view key='visible_to_residents' label='residents' direct=true
    +boolean_view key='visible_to_public' label='public' direct=true

template(name='rental_view_stats')
    h1.ui.header 
        i.chat.icon
        |stats
    .ui.header visibility
    +boolean_view key='visible_to_friends' label='friends' direct=true
    +boolean_view key='visible_to_building' label='building' direct=true
    +boolean_view key='visible_to_residents' label='residents' direct=true
    +boolean_view key='visible_to_public' label='public' direct=true
