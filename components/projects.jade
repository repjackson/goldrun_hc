template(name='projects')
    .ui.stackable.padded.grid
        .row
            .six.wide.column
                .ui.inline.header 
                    +i name='road-worker' classes='ui avatar image'
                    |projects
                .ui.big.icon.button.add_project(title='add project')
                    i.plus.icon
                +cloud filter='project'
            .ten.wide.column.scrolling
                each projects
                    +project_card
                    
                    
template(name='project_card')
    .ui.fluid.segment
        .ui.header #{title}
        +image_view key='image' direct=true
        |!{description}
        each tags
            .ui.basic.label #{this}
        .ui.accordion
            .title activity
            .content
                +activity
            
        //- each updates
        //-     +project_update_small
        a.ui.button(href="/project/#{_id}/view")
            |view
            i.right.chevron.icon


template(name='project_update_small')
    .ui.small.header #{text}





template(name='project_edit')
    with current_doc
        .ui.stackable.padded.grid
            .row
                .four.wide.column 
                    .ui.header 
                        i.pencil.icon
                        |edit project
                    a.ui.big.icon.fluid.button(href="/project/#{_id}/view" title='save')
                        i.green.checkmark.icon
                    +remove_button
                    +array_edit key='tags' label='tags' icon='tags' direct=true
                .twelve.wide.column 
                    +text_edit key='title' label='title' icon='title' direct=true
                    +image_edit key='image' label='image' icon='image' direct=true
                    +html_edit key='description' label='description' icon='content' direct=true
                    +activity
                     
template(name='project_view')
    with current_doc
        .ui.stackable.padded.grid
            .row
                .four.wide.column 
                    a.ui.fluid.button(href="/projects")
                        +i name='road-worker' classes='ui avatar image'
                        |projects
                    .ui.header view project
                    a.ui.big.icon.button(href="/project/#{_id}/edit")
                        i.pencil.icon
                    +voting_full
                    +viewing
                .twelve.wide.column 
                    +text_view key='title' label='title' direct=true
                    +array_view key='tags' label='tags' icon='tags' direct=true
                    +html_view key='description' icon='content' label='description' direct=true
                    +image_view key='image' icon='image' label='image' direct=true
                    +comments
                    +activity


template(name='activity')
    .ui.header 
        i.rss.icon
        |activity
    .ui.feed
        each updates
            .event
                .label
                    img.ui.avatar.image(src="{{c.url author.kiosk_photo width=300 height=300 gravity='face' crop='fill'}}")
                .content
                    .summary
                        a.user #{author.username} 
                        |added
                        .date #{when}
                        .extra.text #{text}
                    .meta
                        +voting
