template(name='work')
    .ui.padded.stackable.grid
        .row
            .twelve.wide.column
                .ui.inline.header 
                    +i name='work' classes='ui avatar image'
                    |work
                .ui.large.label #{work_stats_doc.total_count} total
                .ui.large.label #{work_stats_doc.complete_count} complete 
                .ui.large.label #{work_stats_doc.incomplete_count} incomplete 
                .ui.large.label #{work_stats_doc.total_updates_count} total updates 
                .ui.icon.button.recalc_work(title='recalculate')
                    i.refresh.icon
            .four.wide.column   
                .ui.icon.button.add_work
                    i.large.plus.icon
                    //- |work
        .four.column.row
            .column
                +my_assignments
            //- .column
            //-     +my_unit_work
            //- .column
            //-     +my_building_work
            .column
                +highest_offer
            .column
                +latest_work
            .column
                +most_viewed_work


template(name='my_assignments')
    .ui.header 
        +i name='user-male'
        |my assignments
    .ui.animated.list
        each my_assigments
            +work_item
        
template(name='my_unit_work')
    .ui.header 
        +i name='room'
        |my unit work
    .ui.animated.list
        each my_unit_work
            +work_item
        
        
template(name='all_work')
    .ui.header 
        +i name='work'
        |work
    .ui.animated.list
        each all_work
            +work_item
        
        
template(name='latest_work')
    .ui.header 
        +i name='work'
        |latest
    .ui.animated.list
        each latest_work
            +work_item
        
template(name='highest_offer')
    .ui.header 
        +i name='money'
        |highest offer
    .ui.animated.list
        each offers
            +work_item
        
        
template(name='most_viewed_work')
    .ui.header 
        +i name='work'
        |most viewed
    .ui.animated.list
        each most_viewed
            +work_item
        
        
template(name='my_building_work')
    .ui.header 
        +i name='building'
        |building #{my_building.code} work
    .ui.animated.list
        each my_building_work
            +work_item

template(name='work_item')
    a.item(href="/work/#{_id}/view")
        .ui.small.header 
            if complete
                i.green.checkmark.small.icon(title='incomplete')
            else
                i.circle.outline.small.icon(title="completed on {{short_date completed_date}}")
            |#{title}
        .content
            |#{when} by #{_author_username} #{building_number} #{unit_number}
            if assigned_to_username
                .ui.label(title="assigned to #{assigned_to_username}")
                    i.right.chevron.icon
                    |#{assigned_to_username}
    



template(name='work_edit')
    with current_doc
        .ui.stackable.padded.grid
            .three.column.row
                .column 
                    .ui.header 
                        i.pencil.icon
                        |edit work
                    a.ui.big.icon.fluid.button(href="/work/#{_id}/view" title='save')
                        i.green.checkmark.icon
                    +remove_button
                    +number_edit key='unit_number' icon='room' label='unit number' direct=true
                    +number_edit key='building_number' icon='building' label='building number' direct=true
                    +array_edit key='tags' label='tags' icon='tags' direct=true
                    +array_edit key='location_tags' label='location tags' icon='marker' direct=true
                    +boolean_edit key='need_to_schedule' label='need to schedule' direct=true
                    +single_user_edit key='reported_by' label='reported by' direct=true
                .column 
                    +text_edit key='title' label='title' icon='title' direct=true
                    +image_edit key='image' label='image' icon='image' direct=true
                    +html_edit key='description' label='description' icon='content' direct=true
                .column 
                    +single_user_edit key='assigned_to_username' label='assigned to' direct=true
                    .ui.header stats
                    .ui.small.header #{views} views
                    .ui.small.header #{points} points
                    .ui.header status
                    .ui.small.header status: #{status}
                    
                     
template(name='work_view')
    with current_doc
        .ui.stackable.padded.grid
            .row
                .sixteen.wide.column 
                    a.ui.button(href="/work")
                        i.left.chevron.icon
                        +i name='work' classes='ui avatar image'
                        |work
                    h1.ui.inline.header 
                        if complete 
                            i.green.checkmark.icon
                        else
                            i.circle.outline.grey.pointer.icon.mark_complete(title='mark complete')
                        |#{title}
                    a(href="/work/#{_id}/edit")
                        i.pencil.large.circular.link.icon
            .three.column.row
                .column 
                    +voting_full
                    .ui.header submitted #{_timestamp_long}
                    each _timestamp_tags
                        .ui.basic.label #{this}
                    +viewing
                .column 
                    +number_view key='unit_number' label='unit_number' direct=true
                    +number_view key='building_number' label='building_number' direct=true
                    div
                    +array_view key='tags' label='tags' icon='tags' direct=true
                    div
                    +boolean_view key='need_to_schedule' label='need to schedule' direct=true
                    div
                    +single_user_view key='reported_by' label='reported by' direct=true
                    .large150
                        +html_view key='description' icon='content' label='description' direct=true
                    +image_view key='image' icon='image' label='image' direct=true
                    +boolean_view key='published' label='published' direct=true
                    +comments
                .column
                    +single_user_view key='assigned_to_username' label='assigned to' icon='user-male' direct=true
                    .ui.header 
                        +i name='line-chart'
                        |stats
                    .ui.small.header #{views} views
                    .ui.small.header #{points} points
                    .ui.small.header status: #{status}
                    .ui.header 
                        +i name='rss'
                        |activity
                    .ui.list
                        each log_items
                            .item #{text}
