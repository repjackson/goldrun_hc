template(name='edit_model')
    with model
        .ui.stackable.padded.grid
            .four.wide.column
                h1.ui.header edit model
                a.ui.green.big.circular.icon.button(href="/m/#{slug}")
                    i.big.checkmark.icon
                #delete_model.ui.red.icon.circular.button
                    i.trash.icon
            .twelve.wide.column
                .ui.form
                    +text_edit key='title' label='Title'
                    +text_edit key='slug' label='Slug'
                    +text_edit key='icon' label='Icon'
                    +textarea_edit key='description' label='Description'
                    +array_edit key='tags' label='Tags'
                .ui.inline.header fields
                .ui.icon.circular.button.add_field
                    i.plus.icon
                each fields
                    .ui.divider
                    +field_edit
                    
template(name='field_edit')
    +text_edit key='title'                    
    +text_edit key='key'                    
    +text_edit key='field_type'                    
    +number_edit key='rank' label='rank'                  

            
template(name='view_model')
    with model
        .ui.stackable.padded.grid
            .four.wide.column
                h1.ui.header #{title}
                .ui.circular.icon.big.green.button.add_child(title="Add #{slug}")
                    i.plus.icon
                a.ui.icon.circular.blue.big.button(href="/model/edit/#{_id}")
                    i.pencil.icon
                .ui.form
                    +text_view key='title'
                    +text_view key='slug'
                    +text_view key='icon'
                    +textarea_view key='description'
                    +array_view key='tags'
                +cloud filter=slug
        
            .twelve.wide.column
                //- .ui.header Fields
                //- each fields
                //-     .ui.divider
                //-     +field_view
                each model_docs
                    .ui.fluid.card
                        .content
                            +Template.dynamic template=model_doc
                            +array_view key='tags'
                            +edit_button
        
template(name='field_view')
    +text_view key='title'                    
    +text_view key='key'                    
    +text_view key='field_type'                    
    +number_view key='rank' label='rank'                  

        
        
            
template(name='models') 
    .ui.stackable.padded.grid
        .four.wide.column
            h1.ui.center.aligned.header 
                i.icon(class=icon)
                |Models
            #add_model.ui.icon.circular.button
                i.green.plus.icon
            +cloud filter='model'
        .twelve.wide.column 
            .ui.centered.cards
                each models
                    +model
                    
                
template(name='model')
    .ui.card
        .content
            .header 
                i.icon(class=icon)
                |#{title}
            .description
                +text_view key='slug'
            a.ui.icon.circular.button(href="/model/edit/#{_id}") 
                i.pencil.icon
            a.ui.icon.circular.button(href="/m/#{slug}") 
                i.right.arrow.icon
