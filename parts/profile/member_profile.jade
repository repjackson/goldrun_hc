template(name='member_profile_layout')
    //- img.ui.fluid.image.checkin_banner(src="{{c.url 'frontrange' width=1000 height=1000 crop='crop'}}")
    +nav
    with user_from_username_param
        .ui.stackable.grid
            .row
                //- img.ui.fluid.image.checkin_banner(src="{{c.url banner_image width=1000 height=1000 crop='crop'}}")
                .four.wide.column
                    a.item.mobile.hidden(href="/member/#{user_from_username_param.username}/")
                        img.ui.centered.image(src="{{c.url profile_image_id height=300 width=300 gravity='face' crop='fill'}}")
                    .ui.center.aligned.basic.segment.mobile.hidden
                        a(href="/member/#{user.username}")
                            .ui.large.center.aligned.header
                                strong #{user.name}
                                //- 
                                //- strong #{user.first_name} #{user.last_name}
                                //- small @#{user.username}        
                        a.ui.header(href="/member/#{user_from_username_param.username}/finance" title='credit')
                            +i name='coins'
                            |{{fixed user.credit}}
                    .ui.two.column.middle.aligned.grid.mobile.only
                        .column
                            img.ui.small.inline.image.mobile.only(src="{{c.url profile_image_id height=300 width=300 gravity='face' crop='fill'}}")
                        .column
                            .ui.inline.header
                                strong #{user.name}
                                //- small @#{user.username}        
                            a.ui.inline.header(href="/member/#{user_from_username_param.username}/finance" title='credit')
                                //- +i name='coins'
                                i.coins.icon
                                |{{fixed user.credit}}
                            if handling_active
                                .ui.large.basic.green.label
                                    |handling active (#{wait_time})
                            else 
                                .ui.large.basic.label
                                    |inactive
                    if is_current_user
                        unless handling_active 
                            .ui.fluid.button.clock_in
                                //- +i name='clock-add'
                                i.sign.in.icon 
                                |clock in
                        else 
                            .ui.fluid.button.clock_out
                                i.sign.in.icon 
                                //- +i name='remove-clock' 
                                |clock out
                        a.ui.button.item(href="/member/#{user_from_username_param.username}/edit" title='profile settings')
                            +i name='settings' 
                            |edit
                    else if is_admin
                        a.ui.button.item(href="/member/#{user_from_username_param.username}/edit" title='profile settings')
                            +i name='settings' 
                            |edit
                    if is_dev
                        +boolean_edit key='disabled' label='disabled' icon='user shield' direct='true'
                    //- else
                    //-     .ui.button.direct_message(title='new message')
                    //-         +i name='envelope'
                    .ui.fluid.vertical.pointing.secondary.menu(class="{{currentUser.nav_color}}")
                        a.item(href="/member/#{username}/dashboard" class="{{isActiveRoute regex='user_dashboard'}}")
                            i.grey.dashboard.icon
                            |dashboard
                        a.item(href="/member/#{username}/credit" class="{{isActiveRoute regex='user_credit'}}")
                            i.coins.grey.icon
                            |credit
                        a.item(href="/member/#{username}/questions" class="{{isActiveRoute regex=user_offers}}")
                            i.question.mark.icon
                            |questions
                        //- a.item(href="/member/#{username}/passages" class="{{isActiveRoute regex=user_passages}}")
                        //-     i.list.icon
                        //-     |passages
                        a.item(href="/member/#{username}/shop" class="{{isActiveRoute regex='user_shop'}}")
                            i.shopping.cart.grey.icon
                            |shop
                        a.item(href="/member/#{username}/requests" class="{{isActiveRoute regex='user_requests'}}")
                            i.hand.holding.usd.grey.icon
                            | requests
                        a.item(href="/member/#{username}/social" class="{{isActiveRoute regex='user_social'}}")
                            i.comments.grey.icon
                            |social
                        a.item(href="/member/#{username}/brain" class="{{isActiveRoute regex='user_brain'}}")
                            i.grey.brain.icon
                            |brain
                        a.item(href="/member/#{username}/karma" class="{{isActiveRoute regex='user_karma'}}")
                            i.grey.yin.yang.icon
                            |karma
                        a.item(href="/member/#{username}/right" class="{{isActiveRoute regex='user_right'}}")
                            i.grey.checkmark.icon
                            |right
                        a.item(href="/member/#{username}/wrong" class="{{isActiveRoute regex='user_wrong'}}")
                            i.grey.remove.icon
                            |wrong
                        a.item(href="/member/#{username}/finance" class="{{isActiveRoute regex='user_finance'}}")
                            i.grey.coins.icon
                            |finance
                        a.item(href="/member/#{username}/cart" class="{{isActiveRoute regex='user_cart'}}")
                            i.grey.shopping.cart.icon
                            |cart
                        a.item(href="/member/#{username}/groups" class="{{isActiveRoute regex='user_groups'}}")
                            i.grey.users.icon
                            |groups
                        a.item(href="/member/#{username}/tutoring" class="{{isActiveRoute regex='user_tutoring'}}")
                            i.grey.chalkboard.icon
                            |tutoring
                        a.item(href="/member/#{username}/events" class="{{isActiveRoute regex='user_events'}}")
                            i.grey.calendar.icon
                            |events
                        a.item(href="/member/#{username}/fiq" class="{{isActiveRoute regex=user_fiq}}")
                            i.grey.line.chart.icon
                            |fiq
                        a.item(href="/member/#{username}/awards" class="{{isActiveRoute regex=user_awards}}")
                            i.grey.award.icon
                            |awards
                        a.item(href="/member/#{username}/friends" class="{{isActiveRoute regex='user_friends'}}")
                            i.grey.users.icon
                            |friends
                        a.item(href="/member/#{username}/messages" class="{{isActiveRoute regex='user_messages'}}")
                            i.grey.envelope.icon
                            |messages
                    
                    if is_current_user
                        a.ui.button.logout(href="#" title='logout')
                            //- i.sign.out.alternate.icon
                            +ismall name='exit' 
                            |log out
                        a.ui.button.logout_other_clients(href="#" title='logout other clients')
                            //- i.globe.icon
                            +ismall name='globe' 
                            |log out other clients
                    if is_admin
                        .ui.basic.segment
                            .ui.header 
                                +i name='shield'
                                |roles
                            each roles
                                .ui.basic.label #{this}
                .twelve.wide.column
                    a.ui.large.compact.button(href="/member/#{username}/dashboard" class="{{isActiveRoute 'member_dashboard'}}")
                        +ismall name='dashboard' classes='ui inline image'
                        |dashboard
                    a.ui.large.compact.button(href="/member/#{username}/info" class="{{isActiveRoute 'member_info'}}")
                        +ismall name='info' classes='ui inline image'
                        |info
                    a.ui.large.compact.button(href="/member/#{username}/rentals" class="{{isActiveRoute 'member_rentals'}}")
                        +ismall name='clock' classes='ui inline image'
                        |rentals
                    a.ui.large.compact.button(href="/member/#{username}/handling" class="{{isActiveRoute 'member_handling'}}")
                        +ismall name='hand-box' classes='ui inline image'
                        |handling
                    a.ui.large.compact.button(href="/member/#{username}/reservations" class="{{isActiveRoute 'member_reservations'}}")
                        +ismall name='invoice' classes='ui inline image'
                        |reservations
                    a.ui.large.compact.button(href="/member/#{username}/finance" class="{{isActiveRoute 'member_finance'}}")
                        +ismall name='money' classes='ui inline image'
                        |finance
                    //- .ui.icon.compact.button.toggle_view_more
                    //-     i.large.dropdown.icon
                    //-     a.ui.compact.button(href="/member/#{username}/bookmarks" class="{{isActiveRoute 'member_bookmarks'}}")
                    //-         +ismall name='star' classes='ui inline image'
                    //-         |bookmarks
                        //- a.ui.compact.button(href="/member/#{username}/contact" class="{{isActiveRoute 'member_contact'}}")
                        //-     +ismall name='phone' classes='ui inline image'
                        //-     |contact
                        //- a.ui.compact.button(href="/member/#{username}/comparison" class="{{isActiveRoute 'member_comparison'}}")
                        //-     +ismall name='scales' classes='ui inline image'
                        //-     |comparison
                        //- a.ui.compact.button(href="/member/#{username}/offers" class="{{isActiveRoute 'member_offers'}}")
                        //-     +ismall name='sell' classes='ui inline image'
                        //-     |offers
                        //- a.ui.compact.button(href="/member/#{username}/tags" class="{{isActiveRoute 'member_tags'}}")
                        //-     +ismall name='tags' classes='ui inline image'
                        //-     |tags
                        //- a.ui.compact.button(href="/member/#{username}/messages" class="{{isActiveRoute 'member_messages'}}")
                        //-     +ismall name='new-message' classes='ui inline image'
                        //-     |mail
                        //- a.ui.compact.button(href="/member/#{username}/stats" class="{{isActiveRoute 'member_stats'}}")
                        //-     +ismall name='line-chart' classes='ui inline image'
                        //-     |stats
                        //- a.ui.compact.button(href="/member/#{username}/notifications" class="{{isActiveRoute 'member_notifications'}}")
                        //-     +ismall name='appointment-reminders' classes='ui inline image'
                        //-     |notifications
                    div.global_container
                        +yield
    +footer 
