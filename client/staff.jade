template(name='staff')
    h1.ui.center.aligned.grey.header 
        +i name='user shield'
        |staff
    .ui.inline.header
        |#{checkedin_members.count} checked in members
    .ui.doubling.centered.cards
        each checkedin_members
            +big_user_card username
    .ui.center.aligned.basic.segment
        a.ui.big.circular.basic.button(href='/add_resident')
            i.user.shield.icon
            | add resident
        
    .ui.stackable.padded.grid
        .three.column.row
            //- .column
            //-     +task_widget
            .column
                +wywo
            .column
    //- .ui.header current health club checked in
    //- each active_healthclub_sessions
    //-     .ui.header this
    //- .ui.header current court keys checked out
    //- each court_key_sessions
    //-     .ui.header this
    //- .ui.header checklist reminders
    //- each court_key_sessions
    //-     .ui.header this
    
    .ui.header notes/work orders
    +add_button model='work_order'
    .ui.header communication log
    +add_button model='communication'
    //- +model_docs_crud model='communication'
    
    
    //- +schedule
    //- +shift_change_requests
    +view_chats


template(name='task_widget')
    .ui.smoothed.segment
        .ui.header 
            +i name='task'
            |todos
        //- .ui.fluid.styled.accordion.profile_block
        +goto_model slug='task'
        .ui.icon.circular.basic.button.new_task
            i.plus.icon
            //- input.assign_task(type='text' placeholder='assign task...')
        //- .ui.button.view_complete(class=view_complete_class)
        //-     |View Completed
        // .ui.button.view_incomplete(class=view_complete_class)
        //     |View Incomplete
        each tasks
            .ui.smoothed.segment
                .ui.header #{body}
                +boolean_edit key='complete' label='Complete' direct=true true_icon='checkmark' false_icon='remove' icon_only=true
                //- +voting
                +author_info
                +creation_info
                if is_author
                    +remove_button
    
    
    
    
    
    
template(name='wywo')
    .ui.smoothed.segment
        .ui.header 
            +i name='note'
            |while you were out
        


template(name='schedule')
    //- .ui.center.aligned.header 
    //-     i.calendar.icon
    //-     |schedule
    table.ui.definition.celled.striped.selectable.table
        thead
            tr
                th
                th sunday
                th monday
                th tuesday
                th wednesday
                th thursday
                th friday
                th saturday
        tbody
            tr
                td morning 7am-12pm
                td 
                    +facet_staff_select tags='shift,sunday,morning'
                td 
                    +facet_staff_select tags='shift,monday,morning'
                td 
                    +facet_staff_select tags='shift,tuesday,morning'
                td 
                    +facet_staff_select tags='shift,wednesday,morning'
                td 
                    +facet_staff_select tags='shift,thursday,morning'
                td 
                    +facet_staff_select tags='shift,friday,morning'
                td 
                    +facet_staff_select tags='shift,saturday,morning'
            tr
                td afternoon 12pm-4pm
                td 
                    +facet_staff_select tags='shift,sunday,afternoon'
                td 
                    +facet_staff_select tags='shift,monday,afternoon'
                td 
                    +facet_staff_select tags='shift,tuesday,afternoon'
                td 
                    +facet_staff_select tags='shift,wednesday,afternoon'
                td 
                    +facet_staff_select tags='shift,thursday,afternoon'
                td 
                    +facet_staff_select tags='shift,friday,afternoon'
                td 
                    +facet_staff_select tags='shift,saturday,afternoon'
            tr
                td evening 4pm-9pm
                td 
                    +facet_staff_select tags='shift,sunday,evening'
                td 
                    +facet_staff_select tags='shift,monday,evening'
                td 
                    +facet_staff_select tags='shift,tuesday,evening'
                td 
                    +facet_staff_select tags='shift,wednesday,evening'
                td 
                    +facet_staff_select tags='shift,thursday,evening'
                td 
                    +facet_staff_select tags='shift,friday,evening'
                td 
                    +facet_staff_select tags='shift,saturday,evening'


template(name='shift_change_requests')
    .ui.grey.inline.header
        i.clock.icon
        |shift change requests
    .ui.icon.circular.basic.button.add_shift_change_request
        i.large.icons
            i.clock.icon
            i.plus.corner.icon
    table.ui.celled.fixed.unstackable.table
        thead
            tr
                th date
                th time
                th author
                th assigned staff
                th 
        tbody
            each requests
                +request_row
                
                
template(name='request_row')
    tr
        td(data-label='Date')
            if can_edit
                +date_edit key='date' direct=true
            else
                +date_view key='date' direct=true
        td(data-label='Time')
            if can_edit
                +time_edit key='time' direct=true
            else
                +time_view key='time' direct=true
        td(data-label='Author')
            +author_info
        td(data-label='Assigned Staff')
            //- if can_edit
            //-     +single_user_edit key='assigned_staff' role_filter='staff' direct=true
            //- else
            +username_info assigned_staff
        td(data-label='Actions')
            .ui.basic.icon.circular.button.take_shift(title='take shift')
                i.checkmark.icon
            .ui.basic.icon.circular.button.declare_unavailable(title='declare unavailable')
                i.ban.icon
            each unavailable
                .ui.basic.circular.label(title='unavailable') #{this}
            if can_edit
                +remove_button


// template(name='edit_bike')
//     with current_doc
//         .ui.text.container.segment
//             .ui.center.aligned.header Edit Impounded Bike 
//             .ui.form
//                 +edit_image
//                 +edit_tags
//                 +edit_body
//                 a.ui.green.large.button(href='/bikes') Save Impounded Bike
//                 #delete_bike.ui.red.icon.button
//                     i.trash.icon
            
