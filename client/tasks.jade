
template(name='edit_task')
    with task
        .ui.stackable.padded.grid
            .four.wide.column
                h1.ui.center.aligned.header edit task
                a.ui.green.big.button(href='/tasks') save
                #delete_task.ui.red.icon.button
                    i.trash.icon
            .twelve.wide.column
                .ui.form
                    +image_edit key='before_image_id'
                    +text_edit key='location'
                    //- +single_user_ref key='user'
                    +date_edit key='due_date'
                    .ui.secondary.segment
                        +boolean_edit key='complete'
                        if complete
                            +date_edit key='complete_date'
                            +image_edit key='after_image'
                            +textarea_edit key='notes'
                    +textarea_edit key='description'
                    +array_edit key='tags'
            
            
template(name='tasks') 
    .ui.container
        h1.ui.center.aligned.header tasks
        i#add_task.green.plus.link.icon 
        +cloud filter='task'
        .ui.centered.cards
            each tasks
                +task
                    
                
template(name='task')
    .ui.card
        if before_image_id
            .image
                .ui.shape
                    .flip_shape.sides
                        if before_image_id
                            a.side.active
                                .content
                                    .ui.center.aligned.header Before
                                .image
                                    img.ui.image(src="{{c.url before_image_id width='400' height='400' crop='lpad' }}")
                        if after_image_id
                            a.side
                                .content
                                    .ui.center.aligned.header After
                                .image
                                    img.ui.image(src="{{c.url after_image_id width='400' height='400' crop='lpad' }}")
        .content
            if complete
                span.right.floated
                    i.green.large.check.icon
            else
                i.right.floated.remove.large.icon
            .header #{description}
            .meta
                i.location.arrow.icon
                |#{location}
            if due_date
                span
                    i.calendar.icon
                    |#{due_date}
        .content
            i.tags.icon
            each tags
                .ui.basic.label #{this}
        if complete
            .content
                |Completed by #{staff}
                if complete_date
                    |on #{complete_date}
                if notes
                    div
                        i.edit.icon
                        |#{notes}
        .content
            a.ui.basic.button(href="/task/edit/#{_id}") 
                i.pencil.icon
                |edit
            // a.ui.compact.button(href="/task/view/#{_id}") 
            //     |View
