template(name='home')
    .ui.padded.stackable.grid
        .cent.row
            .three.wide.column
                //- img.ui.cent.small.circular.image.pointer.toggle_lights(src="{{c.url 'gold_run_logo' }}")
                //- +i name='home' classes='ui inline image'
                //- .ui.center.aligned.basic.segment
                //-     .ui.inline.grtext.center.aligned.pointer.header.toggle_display
                //-         |gro
                        //- | www.goldrun.online
                //- div
                +health_club_status_small
                .ui.hidden.divider
                +stats_small
            .four.wide.column
                div
                .ui.grey.header
                    |offers
                .ui.grey.header
                    |for sale
                +rental_small
                .ui.grey.header
                    |polls
                .mediumscroll
                    each polls
                        +poll_results
                    
            .five.wide.column
                +requests_small
                +service_small
                +karma_leaderboard
                +work_order_small
                //- .ui.hidden.divider
                //- +latest_project_updates
                //- unless display_mode
                //-     +projects_small             
                //- +work_small
            //-     +posts_small
            //- .column
            //-     +market_small
            .four.wide.column
                +latest_activity
                .ui.grey.header chat
                +footer_chat
                //- +gallery_small
                .ui.hidden.divider
                //- +events_small
    
                //- +service_list
                //- +service_slider            
                //- with current_ad
                //-     .ui.header #{title}
                //-     img(src="{{c.url image height=500 width=800 background='white' crop='lpad'}}")
                //-     |!{content}
                //-     unless display_mode
                //-         a(href=link) #{link}
                //-         +voting
                //- .ui.hidden.divider
                //- +ismall name='poll'
                //- .ui.inline.grey.header poll
                //- .ui.small.header do you like living at gold run?
                //- .ui.large.icon.button.happy
                //-     i.outline.thumbs.up.large.icon
                //-     |#{hsd.happy_votes}
                //- .ui.large.icon.button.unhappy
                //-     i.outline.thumbs.down.large.icon
                //-     | #{hsd.unhappy_votes}
                //- .ui.small.header next movie night movie?
                //- each movie_options
                //-     .ui.large.button.vote_movie
                //-         | #{title}
                //- .ui.divider
    //- form.inline(action='https://www.paypal.com/cgi-bin/webscr', method='post', target='_top')
    //-     input(type='hidden', name='cmd', value='_s-xclick')
    //-     input(type='hidden', name='hosted_button_id', value='BUX7ZDWUFLVDQ')
    //-     //- // input(type='image', src='https://www.paypalobjects.com/en_US/i/btn/btn_donate_SM.gif', border='0', name='submit')
    //-     //- <input type="image" src="https://www.paypalobjects.com/en_US/i/btn/btn_donate_LG.gif" border="0" name="submit" title="PayPal - The safer, easier way to pay online!" alt="Donate with PayPal button" />
    //-     img(alt='', border='0', src='https://www.paypal.com/en_US/i/scr/pixel.gif', width='1', height='1')
    //-     button.ui.icon.button(type='submit' title='donate')
    //-         +ismall name='donate' classes='ui inline mini image'
            
        //- if is_dev
        //-     .four.column.row
        //-         .column
        //-             +published_resident_small
        //-         .column
        //-             +karma_leaderboard
        //-         .column
        //-             +most_viewed_posts
        //-         .column
        //-             +most_viewed_models
                    //- +meal_widget
                    //- +marketplace_widget
                    //- .ui.header chat
                    //- +model_scroller model='for_rent' header='For Rent' icon='business'
                    //- +model_scroller model='event' header='Events' icon='calendar'
                //- .column
                //-     +cal
                    //- +model_scroller model='photo' header='Photos' icon='image'
            //- .two.column.row    
            //-     .column
            //-         +model_scroller model='shop' header='marketplace' icon='shop'
            //-     .column
            //-         +model_scroller model='gr_post' header='posts' icon='post'
            //- .one.column.row    
            //-     .column
            //-         iframe(src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d241.41414983186405!2d-105.2554393150354!3d40.00847065387155!2m3!1f357.8823529411765!2f37.27633198895564!3f0!3m2!1i1024!2i768!4f35!3m3!1m2!1s0x0%3A0x710555f334428f65!2sGold+Run+Health+Club!5e1!3m2!1sen!2sus!4v1559922280502!5m2!1sen!2sus" width="1200" height="450" frameborder="0" style="border:0" allowfullscreen)
            //- .three.column.row    
            //-     .column
            //-         +model_scroller model='group' header='groups' icon='groups'
            //-     .column
            //-         +model_scroller model='company' header='businesses' icon='business'
            //- .three.column.row    
            //-     .column
            //-         +model_scroller model='library' header='library' icon='library'
            //-     .column
            //-         +model_scroller model='ad' header='resident ads' icon='presentation'
            //-     .column
            //-         +model_scroller model='for_rent' header='for rent' icon='business'

            
        //- .eight.wide.column
        //-     .ui.header marketplace
        //-     each marketplace_items
        //-         +marketplace_item
        //- .eight.wide.column
        //-     .ui.header posts
        //-     each posts
        //-         +post

template(name='requests_small')
    .ui.grey.header 
        |requests

template(name='shop_small')
    .ui.header 
        +i name='shop'
        |for sale
    .ui.relaxed.big.list
        each products 
            .item
                if image
                    img.ui.mini.inline.image(src="{{c.url image width=300 height=300 gravity='face' crop='fill'}}")
                if picture
                    img.ui.mini.inline.image(src="{{c.url picture width=300 height=300 gravity='face' crop='fill'}}")
                .ui.grey.inline.small.header 
                    |#{title}
    





template(name='stats_small')
    +ismall name='line-chart' classes='ui inline image'
    .ui.inline.grey.header.calc_home_stats
        |stats
    div
    .ui.inline.grey.header 
        strong #{hsd.home_views}
        small website views
    div
    .ui.inline.grey.header
        strong #{hsd.current_hc_members}
        small people at health club
    div
    .ui.inline.grey.header
        strong #{hsd.total_hc_sessions}
        small total health club sessions
    //- .ui.grey.header total health club sessions this month
    div
    .ui.inline.grey.header
        strong #{hsd.registered_owners}
        small registered owners
    div
    .ui.inline.grey.header
        strong #{hsd.registered_residents}
        small registered residents
    
    
template(name='gallery_small')
    //- .ui.inline.grey.header 
    //-     +i name='gallery'
    //-     |gallery
    +slider



template(name='work_small')
    //- +ismall name='maintenance' classes='ui inline image'
    .ui.inline.grey.header 
        |recent completed work
    each work
        .ui.small.header #{title}
        each tags
            .ui.tiny.basic.label #{this}


template(name='work_order_small')
    a.ui.fluid.button(href="/m/work_order")
        //- +ismall name='maintenance'
        .ui.inline.grey.header
            |maintenance
    //- unless display_mode
    //-     .ui.large.icon.button.submit_work_order(title='add work order')
    //-         i.large.plus.icon
    //-     +cloud filter='work_order'
    .ui.small.grey.header average response time #{msd.avg_response_time}
    .ui.small.grey.header average complete time #{msd.avg_complete_time}
    .ui.small.grey.header incomplete work orders #{msd.incomplete_work_orders}
    .ui.small.grey.header complete work orders #{msd.complete_work_orders}
    .ui.divided.list
        each work_order
            .item
                if complete
                    span
                        i.checkmark.icon
                else 
                    span
                        i.circle.outline.icon
                .ui.small.inline.header #{body} #{content} #{text} #{notes}
                each tags
                    .ui.tiny.basic.label #{this}
                |#{when}
                //- unless display_mode
                //-     +voting
                | #{points} 
                span 
                    i.thumbs.up.outline.grey.icon



template(name='leaderboard_small')
    .ui.header
        +ismall name='leaderboard'
        |leaderboard
    .ui.small.header most tasks completed
    if is_dev
        +call_method name='calc_completed_tasks'
    .ui.small.header most assigned tasks completed
    .ui.small.header most money earned
    


//- template(name='services_small')
//-     a.ui.grey.header(href="/m/service")
//-         |services
//-     .ui.link.list
//-         each services 
//-             a.item(href="/service/#{_id}/view") #{title}

template(name='service_slider')
    //- #layerslider(style='width:100%; height: 400px;')
    #service_slider(style='width:100%; height: 250px')
        each slides
            .ls-slide(data-ls='slidedelay: 10000;')
                //- if image_url
                //-     img.ls-bg(src=image_url)
                .ls-l(style="top: 5px; left: 10px;" )
                    .ui.header #{title}
                .ls-l(style="top: 25px; left: 10px; width:200px; height:20px;" )
                    .ui.small.header !{description}
                img.ui.cent.image.ls-l(src="{{c.url image height=180 width=300 crop='fill'}}" style="top: 50px; left: 0%;")
                //- img.ls-bg(src="{{c.url image height=500 width=800 background='white' crop='lpad'}}", alt='Slide background' )
                //- .ls-l(style="top: 50%; height: 170px; width: 170px; left: 20%;" )
                //-     h2.slider-subheader: subtitle
                //-     // h2.slider-subheader
                //-     //     | My goal is to spread light to others to help them navigate their own journey through life.
                    
                    
template(name='event_slider')
    //- #layerslider(style='width:100%; height: 400px;')
    #event_slider(style='width:100%; height: 250px')
        each slides
            .ls-slide(data-ls='slidedelay: 10000;')
                //- if image_url
                //-     img.ls-bg(src=image_url)
                .ls-l(style="top: 5px; left: 10px;" )
                    .ui.header #{title}
                .ls-l(style="top: 25px; left: 10px; width:200px; height:20px;" )
                    .ui.small.header !{description}
                img.ui.cent.image.ls-l(src="{{c.url image_id height=180 width=300 crop='fill'}}" style="top: 50px; left: 0%;")
                //- img.ls-bg(src="{{c.url image height=500 width=800 background='white' crop='lpad'}}", alt='Slide background' )
                //- .ls-l(style="top: 50%; height: 170px; width: 170px; left: 20%;" )
                //-     h2.slider-subheader: subtitle
                //-     // h2.slider-subheader
                //-     //     | My goal is to spread light to others to help them navigate their own journey through life.
                    
                    
template(name='events_small')
    //- .ui.inline.grey.header 
    //-     +i name='calendar'
    //-     |events
    +event_slider
    //- +model_scroller model='event' header='events' icon='calendar'

    //- .ui.animated.large.list
    //-     each gr_events
    //-         a.active.item(href="/event/#{_id}/view") 
    //-             .ui.small.header #{title}
    //-             each tags
    //-                 .ui.small.basic.label #{this}
    //-             //- span(title='views and points')
    //-             //-     |#{views}
    //-             //-     i.eye.grey.icon
    //-             //-     |#{points}
    //-             //-     i.thumbs.up.outline.grey.icon
    //- 
    //-         //- a.active.item(href="/m/#{model}/#{_id}/view")



template(name='health_club_status_small')
    div
    .ui.inline.grey.header 
        |upper hot tub
        +water_status slug='upper_hot_tub'
        //- div
    .ui.small.horizontal.list
        .item
            |#{latest_uht_reading.temperature}&#8457;
        .item
            |#{latest_uht_reading.ph} ph 
        .item
            |#{latest_uht_reading.chlorine} chl
        .item
            |#{latest_uht_reading.when}
    div
    .ui.inline.grey.header lower hot tub
        +water_status slug='lower_hot_tub'
        //- div
    .ui.small.horizontal.list
        .item
            |#{latest_lht_reading.temperature}&#8457;
        .item
            |#{latest_lht_reading.ph} ph 
        .item
            |#{latest_lht_reading.chlorine} chl
        .item
            |#{latest_lht_reading.when}
    div
    .ui.inline.grey.header
        | pool
        +water_status slug='pool'
        //- div
    .ui.small.horizontal.list
        .item
            |#{latest_pool_reading.temperature}&#8457;
        .item
            |#{latest_pool_reading.ph} ph 
        .item
            |#{latest_pool_reading.chlorine} chl
        .item
            |#{latest_pool_reading.when}


template(name='water_status')
    if is_staff
        if on
            i.checkmark.link.icon.toggle_status
        else    
            i.ban.link.icon.toggle_status
    else
        if on
            i.checkmark.large.icon
        else    
            i.ban.large.icon
    //- with latest_reading
    //-     | #{temperature}&#8457;
    //- div



template(name='poll_results')
    a.ui.inline.small.grey.header(href="/vote/#{_id}/view") #{title}
    i.thumbs.up.outline.inline.icon
    |#{upvoter_ids.length}
    div
    i.thumbs.down.outline.inline.icon
    | #{downvoter_ids.length}
    .ui.hidden.divider
